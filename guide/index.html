
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This is a simple example python package.">
      
      
      
      
        <link rel="prev" href="../Tutorial/">
      
      
        <link rel="next" href="../reference/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.18">
    
    
      
        <title>Guides - aprofs Package</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="grey">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#this-part-of-the-project-documentation-focuses-on-explaining-how-the-code-should-be-used" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="aprofs Package" class="md-header__button md-logo" aria-label="aprofs Package" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            aprofs Package
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Guides
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="grey"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="white"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/blewy/aprofs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    aprofs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="aprofs Package" class="md-nav__button md-logo" aria-label="aprofs Package" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    aprofs Package
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/blewy/aprofs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    aprofs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Start
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Guides
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Guides
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#get-you-first-aprofs-object-up" class="md-nav__link">
    <span class="md-ellipsis">
      Get you first aprofs object up
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#select-features-with-aprofs-object" class="md-nav__link">
    <span class="md-ellipsis">
      Select features with aprofs object
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualize-your-shapley-value" class="md-nav__link">
    <span class="md-ellipsis">
      Visualize your shapley value
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Visualize your shapley value">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-visualization" class="md-nav__link">
    <span class="md-ellipsis">
      Example of Visualization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compare-your-shapley-value-from-different-models" class="md-nav__link">
    <span class="md-ellipsis">
      Compare your shapley value from different models
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compare your shapley value from different models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-comparign-models-shaps" class="md-nav__link">
    <span class="md-ellipsis">
      Example of Comparign models shaps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#observe-the-behavior-of-the-models-neutralizing-features" class="md-nav__link">
    <span class="md-ellipsis">
      Observe the behavior of the models neutralizing features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Observe the behavior of the models neutralizing features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-neutralizing-features" class="md-nav__link">
    <span class="md-ellipsis">
      Example of neutralizing features
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#get-you-first-aprofs-object-up" class="md-nav__link">
    <span class="md-ellipsis">
      Get you first aprofs object up
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#select-features-with-aprofs-object" class="md-nav__link">
    <span class="md-ellipsis">
      Select features with aprofs object
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualize-your-shapley-value" class="md-nav__link">
    <span class="md-ellipsis">
      Visualize your shapley value
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Visualize your shapley value">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-visualization" class="md-nav__link">
    <span class="md-ellipsis">
      Example of Visualization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compare-your-shapley-value-from-different-models" class="md-nav__link">
    <span class="md-ellipsis">
      Compare your shapley value from different models
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compare your shapley value from different models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-comparign-models-shaps" class="md-nav__link">
    <span class="md-ellipsis">
      Example of Comparign models shaps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#observe-the-behavior-of-the-models-neutralizing-features" class="md-nav__link">
    <span class="md-ellipsis">
      Observe the behavior of the models neutralizing features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Observe the behavior of the models neutralizing features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-neutralizing-features" class="md-nav__link">
    <span class="md-ellipsis">
      Example of neutralizing features
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="this-part-of-the-project-documentation-focuses-on-explaining-how-the-code-should-be-used">This part of the project documentation focuses on explaining how the code should be used.</h1>
<h2 id="get-you-first-aprofs-object-up">Get you first aprofs object up</h2>
<p>The initial idea of the project was to create a structure that contains all the information needed to use the <strong>shapley values</strong>
along side with you calibration data to get the results you need.</p>
<p>Once instantiated this object with all the proper inputs, we just need to use the correct methods to get our results.</p>
<p>It's very important to get the shapley values calculated before using the aprofs object. I've added some wrapper method called <strong>calculate_shaps</strong> that will help you you bring your own model.</p>
<p>To get the shapley table you just used some of <strong>SHAP package</strong> functionality like tje one you can see below:</p>
<div class="highlight"><span class="filename">TreeExplainer</span><pre><span></span><code>    <span class="n">shap_explainer</span> <span class="o">=</span> <span class="n">TreeExplainer</span><span class="p">(</span><span class="n">model</span><span class="p">)</span> <span class="c1"># Shap explainer for tree models</span>
    <span class="n">shap_valid</span> <span class="o">=</span> <span class="n">shap_explainer</span><span class="o">.</span><span class="n">shap_values</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="c1"># get you sdapley values for your data</span>
    <span class="n">shap_expected_value</span> <span class="o">=</span> <span class="n">shap_explainer</span><span class="o">.</span><span class="n">expected_value</span> <span class="c1"># averaga shapley value</span>
</code></pre></div>
<p>Please reach to the <a href="../api/">API</a> to get all the details of how to create the object and use the method. Basically you need the <strong>calibration</strong> data, the <strong>target column</strong> for that data and an ML <strong>model</strong> that can be scored on the calibration data.
A structural detail is that the model will not be saved inside the aprofs object. I didn't want to bloat the object more than needed.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">aprofs</span> <span class="kn">import</span> <span class="n">code</span>
<span class="kn">from</span> <span class="nn">apros.models</span> <span class="kn">import</span> <span class="n">ClassificationLogisticLink</span>

<span class="c1"># Instantiate the type of model/link that you used for training</span>
<span class="n">logit_model</span> <span class="o">=</span> <span class="n">ClassificationLogisticLink</span><span class="p">()</span>


<span class="n">aprofs_obj</span> <span class="o">=</span> <span class="n">code</span><span class="o">.</span><span class="n">Aprofs</span><span class="p">(</span><span class="n">X_calibration</span><span class="p">,</span> <span class="n">y_target_calibration</span><span class="p">,</span> <span class="n">link_model</span><span class="o">=</span><span class="n">logit_model</span><span class="p">)</span>
</code></pre></div>
<p>In this example the link logit model its used by AProfs internally to be able to calculate the prediction using the shapley values and the same link function that you model is using.
The details behind the scenes is the following: the sum of the shapley values are teh raw values obtained before applying the link function of your model, in the case os classification usually its the odds ration.
Please investigate your model to know what is the link function used if any.</p>
<p>you can extend AProfs to a any link model, you just nee to extend the model class like this:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">aprofs</span> <span class="kn">import</span> <span class="n">code</span>
<span class="kn">from</span> <span class="nn">apros.models</span> <span class="kn">import</span> <span class="n">LinkModels</span>

<span class="k">class</span> <span class="nc">MyModelLink</span><span class="p">(</span><span class="n">LinkModels</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This class implements the interface for classification with logistic link&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">type_model</span><span class="o">=</span><span class="s2">&quot;yuur_type_of_model&quot;</span><span class="p">,</span> <span class="n">type_link</span><span class="o">=</span><span class="s2">&quot;typs pf link&quot;</span><span class="p">,</span> <span class="n">perform</span><span class="o">=</span><span class="s2">&quot;maximize&quot;</span><span class="p">)</span>
        <span class="c1"># the type ahd type line are informative, the perform/performance need to be &quot;maximize&quot; or &quot;minimize&quot;</span>

    <span class="k">def</span> <span class="nf">performance_fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">],</span> <span class="n">prediction</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span> <span class="c1">#you models performance function, need to use (target, prediction)</span>

    <span class="k">def</span> <span class="nf">link_calculate</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">inv_prediction</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">inv_prediction</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid input type for link_calculate&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span> <span class="c1">#you link function goes here</span>

    <span class="k">def</span> <span class="nf">inv_link_calculate</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">prediction</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">Noneß</span> <span class="c1">#you inverse link function goes here</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">() with type model </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type_model</span><span class="si">}</span><span class="s2"> and type link </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type_link</span><span class="si">}</span><span class="s2">&quot;</span>


<span class="c1"># Instantiate the type of model/link that you used for training</span>
<span class="n">logit_model</span> <span class="o">=</span> <span class="n">ClassificationLogisticLink</span><span class="p">()</span>


<span class="n">aprofs_obj</span> <span class="o">=</span> <span class="n">code</span><span class="o">.</span><span class="n">Aprofs</span><span class="p">(</span><span class="n">X_calibration</span><span class="p">,</span> <span class="n">y_target_calibration</span><span class="p">,</span> <span class="n">link_model</span><span class="o">=</span><span class="n">logit_model</span><span class="p">)</span>
</code></pre></div>
<p>[!WARNING]<br />
<strong>At the moment only the </strong>logistic<strong> or </strong>binary<strong> models where tested and develops, more to come in the future and also Only AUC as performance metric is available</strong></p>
<p>You can add the shapley values table and mean shapley value with pre-calculated results like this:</p>
<p><div class="highlight"><pre><span></span><code><span class="n">aprofs_obj</span><span class="o">.</span><span class="n">shap_values</span> <span class="o">=</span> <span class="n">pre_calc_shaps_df</span>
<span class="n">aprofs_obj</span><span class="o">.</span><span class="n">shap_mean</span> <span class="o">=</span> <span class="n">pre_calc_shaps_mean</span>
</code></pre></div>
just simple attribution.</p>
<p>A <strong>note</strong> here, the <strong>aprofs_obj shap values</strong> values at this moment need to like a pandas (pd.df) dataframe. To do this use this snippet of code below for example:</p>
<div class="highlight"><span class="filename">Shap to dataframe</span><pre><span></span><code><span class="n">pre_calc_shaps_df</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">shap_values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">X_calibration</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">X_calibration</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
</code></pre></div>
<p>If you use the wrapper that is provided, this will work:</p>
<div class="highlight"><span class="filename">Shap to dataframe</span><pre><span></span><code><span class="n">aprofs_obj</span><span class="o">.</span><span class="n">calculate_shaps</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</code></pre></div>
<h2 id="select-features-with-aprofs-object">Select features with aprofs object</h2>
<p>After having your shapley value created or added into the aprofs object we can start using the built-in functionality.</p>
<p>The first step will be using the feature selection functionality. At the moment I have implemented the <strong>brute force</strong> method and the <strong>greedy forward selection</strong> method. More will be added in the future.</p>
<p>The idea of <strong>brute force</strong> is that this method will look into all possibilities of the feature combinations and calculate the model performance using the approximate predictions possible with the shapley values table.</p>
<p>The other approach, greedy forward its very intuitive, lets see:
    0 - Initialize the <strong>winning solution</strong> with the best individual feature.
    1 - Select best feature individually not in the <strong>winning solution</strong>.
    2 - Add this feature into the best solution and test if it improves the performance.
    3 - If <strong>yes</strong> in the previous step: keep it in the winning solution and start from <strong>1</strong>, if <strong>no</strong> we drop the feature from the winning solution and back to <strong>1</strong></p>
<p>As an example, the performance of the <strong>feature A</strong> and <strong>feature B</strong>. will be calculated using the following logic:</p>
<div class="highlight"><pre><span></span><code>- (Shapley A + Shapley Value B + Shap mean value)
</code></pre></div>
<p>To this score then its applied the inverse of the link function the get the final prediction.
In the case of binary classification function applied the sigmoid function into the model score.</p>
<p>To run <strong>feature selection</strong> use the following method.</p>
<div class="highlight"><span class="filename">Feature selection</span><pre><span></span><code><span class="n">aprofs_obj</span><span class="o">.</span><span class="n">brute_force_selection</span><span class="p">([</span><span class="s2">&quot;list of features&quot;</span><span class="p">])</span>
</code></pre></div>
<p>It will return a list with the best subset of features.</p>
<p>For the greedy gready_forward_selection use:</p>
<div class="highlight"><span class="filename">Feature selection</span><pre><span></span><code><span class="n">aprofs_obj</span><span class="o">.</span><span class="n">brute_force_selection</span><span class="p">([</span><span class="s2">&quot;list of features&quot;</span><span class="p">])</span>
</code></pre></div>
<h2 id="visualize-your-shapley-value">Visualize your shapley value</h2>
<p>To validate and understand our model its interesting to look into the predicted vs observed values comparing their behavior
along the features used for modelling, but also look at any other feature could look interesting.</p>
<p>An interesting add on can be also to add the marginal effect of the shapley values for that feature,
this was you can see the overall behavior of the models, but also the marginal effect of the feature on your model
building even more intuition and understanding into your package.</p>
<div class="highlight"><span class="filename">Feature Visualization</span><pre><span></span><code><span class="n">aprofs_obj</span><span class="o">.</span><span class="n">visualize_feature</span><span class="p">(</span>
        <span class="n">main_feature</span> <span class="o">=</span> <span class="s2">&quot;Feature A&quot;</span><span class="p">,</span>
        <span class="n">other_features</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Feature B&quot;</span><span class="p">],</span>
        <span class="n">nbins</span> <span class="o">=</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">type_bin</span> <span class="o">=</span> <span class="s2">&quot;qcut&quot;</span><span class="p">,</span>
        <span class="n">type_plot</span> <span class="o">=</span> <span class="s2">&quot;prob&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="example-of-visualization">Example of Visualization</h3>
<p>We can see the observed target, the model prediction, the average shapley values of the <strong>charges</strong> feature and the average effect of the other features excluding the <strong>charges</strong> feature, this way we can see the residual effect of the other features.
This is a <strong>plotly</strong> plot so you can remove the <strong>lines</strong> that you don't need on the plot.
<img alt="Example of Visualization" src="../visualize.png" /></p>
<h2 id="compare-your-shapley-value-from-different-models">Compare your shapley value from different models</h2>
<p>You create a model model and want to compare the behavior of the same features on different models.
Easy, just create two aprofs objects and then used the <strong>compare_feature</strong> method to visualize the marginal behavior of the feature comparing both models.<strong>Please use the same calibration data.</strong></p>
<div class="highlight"><span class="filename">Compare Shapley Values</span><pre><span></span><code><span class="n">aprofs_obj</span><span class="o">.</span><span class="n">compare_feature</span><span class="p">(</span><span class="n">another_aprofs_obj</span>
        <span class="n">feature</span> <span class="o">=</span> <span class="s2">&quot;Feature A&quot;</span><span class="p">,</span>
        <span class="n">nbins</span> <span class="o">=</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">type_bin</span> <span class="o">=</span> <span class="s2">&quot;qcut&quot;</span><span class="p">,</span>
        <span class="n">type_plot</span> <span class="o">=</span> <span class="s2">&quot;prob&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="example-of-comparign-models-shaps">Example of Comparign models shaps</h3>
<p>In this case we have two models and we want to see how the <strong>charges</strong> features behave giving the differences between the models.</p>
<p><img alt="Example of Compare" src="../compare.png" /></p>
<h2 id="observe-the-behavior-of-the-models-neutralizing-features">Observe the behavior of the models neutralizing features</h2>
<p>Another interesting use case could be that you have <strong>control features</strong> on you models that later on will be removed or getting fixed value for deployment.
How to see what happens if you "neutralize this feature<strong>? Just the </strong>visualize_neutralized_feature** method.</p>
<div class="highlight"><span class="filename">Visualize Neutralized Feature</span><pre><span></span><code><span class="n">aprofs_obj</span><span class="o">.</span><span class="n">visualize_neutralized_feature</span><span class="p">(</span>
        <span class="n">main_feature</span> <span class="o">=</span> <span class="s2">&quot;Feature A&quot;</span><span class="p">,</span>
        <span class="n">neutralize_features</span> <span class="o">=</span> <span class="o">=</span> <span class="s2">&quot;Feature B&quot;</span><span class="p">,</span>
        <span class="n">nbins</span> <span class="o">=</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">type_bin</span> <span class="o">=</span> <span class="s2">&quot;qcut&quot;</span><span class="p">,</span>
        <span class="n">type_plot</span> <span class="o">=</span> <span class="s2">&quot;prob&quot;</span><span class="p">)</span>
</code></pre></div>
<p>This will create a plot having the the x-axis the main_feature and will be neutralizing the features defined on the <strong>neutralize_features</strong>.</p>
<p>What is neutralized? Basically the shapley values for the <strong>neutralize_features</strong> will be replaced bu the average values, this way it neutralized the e
effect of differentiation ability of these features.</p>
<h3 id="example-of-neutralizing-features">Example of neutralizing features</h3>
<p>In this example qe have neutralize the <strong>children</strong> feature, and now we want to see wo the models with this neutralized feature compares with the original model.
<img alt="Example of Neutralize" src="../neutralize.png" /></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.3220b9d7.min.js"></script>
      
    
  </body>
</html>